@model IEnumerable<e_TillRemote.Models.Section1>

@{
    ViewData["Title"] = "StockBreakup";
    string TypeSection = Context.Request.Query["TypeSection"].ToString();
    var StockBreakUpName = string.Empty;
    if (TypeSection == "1")
    {
        StockBreakUpName = "StockBreakUp 1";
    }
    if (TypeSection == "2")
    {
        StockBreakUpName = "StockBreakUp 2";
    }
    if (TypeSection == "3")
    {
        StockBreakUpName = "StockBreakUp 3";
    }
    if (TypeSection == "4")
    {
        StockBreakUpName = "StockBreakUp 4";
    }
    if (TypeSection == "5")
    {
        StockBreakUpName = "StockBreakUp 5";
    }

}

<style>
    .row {
        padding-bottom: 8px;
    }
</style>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<!-- Modal Create Section -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Create Stock</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <form asp-action="SaveStockBreakup" method="post">
                    <input type="hidden" name="TypeSection" value="@TypeSection" />
                    <div class="row">
                        <div class="col-md-2">
                            <label>Code</label>
                        </div>
                        <div class="col-md-10">
                            <input type="text" name="Code" class="form-control" required />

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <label>Name</label>
                        </div>
                        <div class="col-md-10">
                            <input type="text" name="Name" class="form-control" required />

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <label>Name1</label>
                        </div>
                        <div class="col-md-10">
                            <input type="text" name="Name1" class="form-control" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <label>PU_NO</label>
                        </div>
                        <div class="col-md-10">
                            <input type="text" name="PU_NO" class="form-control" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <label>PU_DES</label>
                        </div>
                        <div class="col-md-10">
                            <input type="text" name="PU_DESC" class="form-control" />
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-2">

                        </div>
                        <div class="col-md-10">
                            <input type="submit" value="Save" class="btn btn-success" />
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>

<!-- Modal Update Section -->
<div id="EditModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Update Stock</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <form asp-action="UpdateStockBreakup" method="post">
                    <input type="hidden" name="TypeSection" value="@TypeSection" />
                    <input type="hidden" name="SecId" id="updSecId" />
                    <div class="row">
                        <div class="col-md-2">
                            <label>Code</label>
                        </div>
                        <div class="col-md-10">
                            <input type="text" id="updCode" name="Code" class="form-control" disabled />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <label>Name</label>
                        </div>
                        <div class="col-md-10">
                            <input type="text" id="updName" name="Name" class="form-control" required />

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <label>Name1</label>
                        </div>
                        <div class="col-md-10">
                            <input type="text" id="updName1" name="Name1" class="form-control" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <label>PU_NO</label>
                        </div>
                        <div class="col-md-10">
                            <input type="text" id="updPU_NO" name="PU_NO" class="form-control" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2">
                            <label>PU_DESC</label>
                        </div>
                        <div class="col-md-10">
                            <input type="text" id="updPU_DES" name="PU_DESC" class="form-control" />
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-2">

                        </div>
                        <div class="col-md-10">
                            <input type="submit" value="Save" class="btn btn-success" />
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>


<!-- Modal Delete Section -->
<div id="DeleteModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Delete Stock</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <form asp-action="DeleteStockBreakup" method="post">
                    <input type="hidden" name="TypeSection" value="@TypeSection" />
                    <input type="hidden" name="SecId" id="deleteSecId" />

                    <div class="row">
                        <div class="col-md-12">
                            <h2>Are you sure you want to Delete Record?</h2>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-8">
                        </div>
                        <div class="col-md-4">
                            <input type="submit" value="Delete" class="btn btn-danger" />
                        </div>
                    </div>
                </form>
            </div>

        </div>

    </div>
</div>

<h1>@StockBreakUpName</h1>

<p>
    <a asp-action="CreateSection" data-toggle="modal" data-target="#myModal">Create New</a>
</p>
<table class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.CODE)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.NAME)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.NAME1)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PU_NO)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PU_DESC)
            </th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.CODE)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.NAME)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.NAME1)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PU_NO)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PU_DESC)
                </td>
                <td>
                    @{var PU_DES = item.PU_DESC != null ? item.PU_DESC : "nullable";
                        var CODE = item.CODE != null ? item.CODE : "nullable";
                        var NAME = item.NAME != null ? item.NAME : "nullable";
                        var NAME1 = item.NAME1 != null ? item.NAME1 : "nullable";
                        var PU_NO = item.PU_NO != 0 ? item.PU_NO : 0;
                    }
                    <a asp-action="EditSection" data-toggle="modal" asp-route-id="@item.SecId" data-target="#EditModal" onclick="Editfun('@CODE','@NAME','@NAME1','@PU_NO','@PU_DES','@item.SecId')">
                        <span class="glyphicon">&#x270f;</span>
                    </a>
                    <a asp-action="DeleteSection" data-toggle="modal" asp-route-id="@item.SecId" data-target="#DeleteModal" onclick="Deletefun('@item.SecId')">
                        <span class="glyphicon glyphicon-trash"></span>
                    </a>

                </td>
            </tr>
        }
    </tbody>
</table>

<script>

    function Deletefun(SecId) {
        $('#deleteSecId').val(SecId);
    }

    function Editfun(CODE, NAME, NAME1, PU_NO, PU_DES, SecId) {
        debugger;
        if (CODE == 'nullable') {
            CODE = '';
        }
        if (NAME == 'nullable') {
            NAME = '';
        }
        if (NAME1 == 'nullable') {
            NAME1 = '';
        }
        if (PU_NO == 'nullable') {
            PU_NO = '';
        }
        if (PU_DES == 'nullable') {
            PU_DES = '';
        }

        $('#updCode').val(CODE);
        $('#updName').val(NAME);
        $('#updName1').val(NAME1);
        $('#updPU_NO').val(PU_NO);
        $('#updPU_DES').val(PU_DES);
        $('#updSecId').val(SecId);
    }

</script>
